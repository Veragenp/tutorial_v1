pybit==5.5.0
python-telegram-bot==20.6

bybit_api.py
Логика: Этот файл содержит класс BybitAPI, который отвечает за взаимодействие с API Bybit. Он позволяет получать исторические данные (high/low за 7 дней), объем торгов за 24 часа, информацию об инструментах, комиссии, список фьючерсных инструментов, текущие цены через WebSocket, открытые позиции, а также размещать и отменять лимитные ордеры.

fetch_prices.py
Логика: Класс PriceFetcher отвечает за получение и обновление текущих цен для списка монет, указанных в Google Sheets. Использует BybitAPI для подписки на цены через WebSocket, валидирует символы, обрабатывает обновления цен и предоставляет доступ к текущим ценам.

google_sheets.py
Логика: Класс GoogleSheetsClient управляет взаимодействием с Google Sheets. Он позволяет получать данные из листов (например, "analitics", "long", "short"), обновлять ячейки, получать список монет для торговли, а также находить ожидающие сделки (где столбец "Вход в сделку" имеет значение TRUE). Также поддерживает обновление статуса сделок и их отмену.

main.py
Логика: Главный файл для запуска бота. Инициализирует GoogleSheetsClient и BybitAPI, запускает WebSocket для получения цен в отдельном потоке и вызывает populate_database для заполнения листа "database".

populate_historical_data.py
Логика: Скрипт обновляет исторические данные в листе "database" Google Sheets. Получает high/low за 7 дней, рассчитывает ATR (Average True Range), получает объем торгов за 24 часа и фильтрует символы с объемом менее 49 млн USDT.

populate_static_data.py
Логика: Скрипт заполняет статические данные в листе "database". Получает список фьючерсных инструментов, их размер тика, минимальный шаг покупки и комиссии, затем записывает эти данные в таблицу.

price_monitor.py
Логика: Класс PriceMonitor отслеживает цены монет, используя PriceFetcher. Проверяет пересечение уровней LONG/SHORT из Google Sheets и генерирует оповещения, которые сохраняются в истории. Работает в связке с TradingEngine.

run_trade_manager.py
Логика: Запускает TradeManager с параметрами из конфигурации (BYBIT_API_KEY, BYBIT_API_SECRET, TELEGRAM_TOKEN, CHAT_ID). Отвечает за старт процесса управления сделками.

telegram_bot.py
Логика: Модуль содержит функцию send_telegram_message для отправки сообщений в Telegram через API. Используется для уведомлений о событиях (например, пересечение уровней или выполнение сделок).

trade_manager.py
Логика: Класс TradeManager управляет процессом входа в сделки. Проверяет ожидающие сделки из Google Sheets, отправляет запрос на подтверждение через Telegram, ожидает ответа ("да" или "нет"), выполняет или отменяет сделку через BybitAPI. Также следит за лимитом открытых сделок (максимум 5).

trading_engine.py
Логика: Класс TradingEngine обрабатывает оповещения от PriceMonitor. Отслеживает пересечения уровней для LONG/SHORT, формирует сообщения для Telegram и принимает решения о входе в сделку или отмене сценария на основе количества оповещений и временных окон.

update_prices.py (Этот скрипт не используется)
Логика: Скрипт обновляет текущие цены в листе "database". Использует BybitAPI для получения цен через WebSocket и записывает их в колонку "Текущая цена" каждые 60 секунд.

